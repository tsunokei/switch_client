<!DOCTYPE html>
<html lang = "ja">
<head>
	<meta charset = "UTF-8">
	<meta name = "viewport" content = "width=device-width, height=device-height,initial-scale=1,maximum-scale=1 ,user-scalable = no">
	<!-- <meta http-equiv = "refresh" content = " 10; URL = home.html"> -->
	<script src = "components/loader.js"></script>
	<link rel = "stylesheet" href = "components/loader.css">
	<link rel = "stylesheet" href = "css/style.css">
	<link rel = "stylesheet" href = "css/nav.css">
	<link rel = "stylesheet" href = "css/main-content.css">
	<link rel = "stylesheet" href = "css/helper.css">
	<script type="text/JavaScript">
	</script>
</head>
<body>
	<div class = "image-back">
		<div class = "lording-image">
			<img src = "lording.gif">
		</div>
		<h1>読み込み中です...</h1>
	</div>
	<div class = "form">
		<p>
			名前:<input type ="text" id="name" name ="name" size ="40">
		</p>
			<p id="submit">送信</p>
		<p>名前:<input type = "text" id="get" name ="get" size ="40">
		</p>
			<p id="receive">受信</p>
	</div>
	<script>

		$(function(){
			$("#submit").on("click",function(){
				username = $("#name").val();
				$("#name").val("");
				$.ajax({
					url:"http://e6ff64da.ngrok.io/api/v1/auth/token.json",
					type:"GET",
					success: function(msg){
						window.hoge = msg;
						
					},
					error: function(){
						alert("no name!!!");
					}
				});
			});
			$("#receive").on("click",function(){
				$("#get").val(hoge["response"]["auth_token"]);
			});
		});
		$(function getCookie(c_name){//クッキーの取得
			var st="";
			var ed="";
			if(document.cookie.length>0){
				// クッキーの値を取り出す
				st=document.cookie.indexOf(c_name + "=");
				if(st!=-1){ 
					st=st+c_name.length+1;
					ed=document.cookie.indexOf(";",st);
					if(ed==-1) ed=document.cookie.length;
					// 値をデコードして返す
					return unescape(document.cookie.substring(st,ed));
				} 
			}
			return "";
		});
		$(function setCookie(c_name,value,expiredays){//クッキーの保存
		// pathの指定
			var path = location.pathname;
			// pathをフォルダ毎に指定する場合のIE対策
			var paths = new Array();
			paths = path.split("/");
			if(paths[paths.length-1] != ""){
				paths[paths.length-1] = "";
				path = paths.join("/");
			}
			// 有効期限の日付
			var extime = new Date().getTime();
			var cltime = new Date(extime + (60*60*24*1000*expiredays));
			var exdate = cltime.toUTCString();
			// クッキーに保存する文字列を生成
			var s="";
			s += c_name +"="+ escape(value);// 値はエンコードしておく
			s += "; path="+ path;
			if(expiredays){
				s += "; expires=" +exdate+"; ";
			}else{
				s += "; ";
			}
			// クッキーに保存
			document.cookie=s;
		});


		$(function checkCookie(){//クッキーに保存されているものを表示する。
			if(getCookie('testName')){
				var setName = getCookie('testName');
				alert(setName);
			}
		});
		$(function visitorNameWrite(){//ユーザー名をクッキーに保存する。
			var wrtName = document.getElementById('name').value;
			setCookie('vsName',wrtName,30);
			// visitorName();
		});


		//$(function(){

			//$("#submit").on("click", function(){//idがsubmitのものについて、clickしたときに対するfunction
			//	username = $("#name").val();//idがnameであるもののvalueをusernameに格納する			
			//	$("#name").val("");//usernameに格納したら、フォームの中身を空っぽにする
			//	$.ajax({
			//		url: "https://api.github.com/users/" + username + "/repos",
			//		type: "GET",
			//		success: function(msg){//githubのリポジトリからとってきたものをhogeに格納
			//	        window.hoge = msg;
			//		},
			//		error: function(){
			//			alert("no name!");
			//		}
			//	});
			//	var element = $('#frm [name=name]').val();
			//});
		//});ここまで


			// $.ajax({
			// 	url: "https://api.github.com/users/gamerinshaft/repos",
			// 	type: "GET",
			// 	success: function(msg){
			//         window.hoge = msg;
			// 	}
			// var element = $('#frm [name=name]').val();

			// console.log("element");
			//  })
			// console.log("hello,world");

	</script>
</body>
</html>